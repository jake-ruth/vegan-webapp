(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{148:function(e,t,a){e.exports=a(207)},153:function(e,t,a){},154:function(e,t,a){},207:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),l=a.n(c),i=(a(153),a(10)),o=a(139),s=a(243),u=(a(154),a(16)),m=a(20),p=a(9),d=a.n(p),f=a(15),E=a(11),g=a(245),h=a(235),v=a(47),b=function e(){Object(v.a)(this,e)};b.accessToken="veganWebappAccessToken",b.refreshToken="veganWebappRefreshToken",b.applicationUser="veganWebappApplicationUser",b.isLoggedIn=function(){return!!localStorage.getItem(b.accessToken)},b.setAccessToken=function(e){return localStorage.setItem(b.accessToken,e)},b.getAccessToken=function(){return localStorage.getItem(b.accessToken)},b.setRefreshToken=function(e){return localStorage.setItem(b.refreshToken,e)},b.getRefreshToken=function(){return localStorage.getItem(b.refreshToken)},b.setUserToStorage=function(e){return localStorage.setItem(b.applicationUser,JSON.stringify(e))},b.getUserFromStorage=function(){var e=localStorage.getItem(b.applicationUser);return JSON.parse(e)};var y=r.a.createContext({user:b.getUserFromStorage(),setUser:null}),w=a(34),k=a.n(w),N=function e(){Object(v.a)(this,e)};N.login=function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k.a.post("".concat("https://vegan-webapp.herokuapp.com","/login"),{email:t,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();var R=function(){var e=Object(E.d)(),t=e.errors,a=e.control,n=e.handleSubmit,c=Object(m.g)(),l=r.a.useContext(y).setUser,i=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=t.email,n=t.password,e.next=4,N.login(a,n);case 4:r=e.sent,l(r.data.user),b.setUserToStorage(r.data.user),b.setAccessToken(r.data.accessToken),b.setRefreshToken(r.data.refreshToken),c.replace("/"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),alert(JSON.stringify(e.t0));case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"login"},r.a.createElement("img",{src:"".concat("","/veggies.jpg"),className:"login__img"}),r.a.createElement("form",{onSubmit:n(i),className:"login__form container"},r.a.createElement("h2",null,"Log into Plant Based Plate"),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Email Required"},type:"text",id:"email",name:"email",label:"Email",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.email&&t.email.message),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Password Required"},type:"password",id:"password",name:"password",label:"password",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.password&&t.password.message),r.a.createElement(h.a,{variant:"contained",style:{borderRadius:0},color:"primary",type:"submit"},"Submit"),r.a.createElement("div",{className:"sign-up-link"},"Don't have an account yet? Sign up"," ",r.a.createElement(u.b,{to:"/register",style:{color:"purple"}},"here"))))},j=function(){var e=Object(E.d)(),t=(e.register,e.errors),a=e.control,n=e.handleSubmit,c=Object(m.g)(),l=function(){var e=Object(f.a)(d.a.mark((function e(t){var a,n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a={}).email=t.email,a.password=t.password,a.firstName=t.firstName,a.lastName=t.lastName,a.bio="",e.prev=6,e.next=9,k.a.post("".concat("https://vegan-webapp.herokuapp.com","/register"),a);case 9:n=e.sent,b.setAccessToken(n.data.accessToken),b.setRefreshToken(n.data.refreshToken),c.replace("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(6),alert(JSON.stringify(e.t0));case 18:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"register"},r.a.createElement("img",{src:"".concat("","/veggies.jpg"),className:"register__img"}),r.a.createElement("form",{onSubmit:n(l),className:"register__form container"},r.a.createElement("h2",null,"Register Account"),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"First Name Required"},type:"text",id:"firstName",name:"firstName",label:"firstName",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.firstName&&t.firstName.message),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Last Name Required"},type:"text",id:"lastName",name:"lastName",label:"lastName",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.lastName&&t.lastName.message),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Email Required"},type:"text",id:"email",name:"email",label:"Email",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.email&&t.email.message),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Password Required"},type:"password",id:"password",name:"password",label:"password",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.password&&t.password.message),r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Password Confirmation Required"},type:"password",id:"passwordConfirm",name:"passwordConfirm",label:"passwordConfirm",fullWidth:!0}),r.a.createElement("div",{className:"error"},t.passwordConfirm&&t.passwordConfirm.message),r.a.createElement(h.a,{variant:"contained",style:{borderRadius:0},color:"primary",type:"submit"},"Submit"),r.a.createElement("div",{className:"sign-up-link"},"Already have an account? Sign in"," ",r.a.createElement(u.b,{to:"/loginPage",style:{color:"purple"}},"here"))))},O=a(241),S=a(242),x=a(93),_=a(72),C=a.n(_),T=a(90),I=a.n(T),U=a(135),A=a.n(U),P=a(5),F=a(236),L=a(234),M=a(237),q=a(238),B=a(239),W=a(240),V=a(126),H=a(248),D=a(89),z=a.n(D),J=a(105),Y=a.n(J),G=a(104),K=a.n(G),Q=Object(F.a)({list:{width:300},fullList:{width:"auto"}}),X=function(){var e=Q(),t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{onClick:function(){return c(!n)},edge:"end",color:"inherit","aria-label":"menu"},r.a.createElement(Y.a,null)),r.a.createElement(H.a,{anchor:"right",open:n,onClose:function(){return c(!n)}},r.a.createElement("div",{className:Object(P.a)(e.list),role:"presentation"},r.a.createElement(L.a,null,r.a.createElement(u.b,{style:{color:"black"},to:"/"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(K.a,null)),r.a.createElement(B.a,{primary:"Home"}))),r.a.createElement(u.b,{style:{color:"black"},to:"/browse"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(z.a,null)),r.a.createElement(B.a,{primary:"Browse"}))),r.a.createElement(u.b,{style:{color:"black"},to:"/createRecipe"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(I.a,null)),r.a.createElement(B.a,{primary:"Create Recipe"}))),r.a.createElement(W.a,null),r.a.createElement(u.b,{style:{color:"black"},to:"/account"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(C.a,null)),r.a.createElement(B.a,{primary:"Account"}))))))))},Z=function(){var e=Q(),t=r.a.useState(!1),a=Object(i.a)(t,2),n=a[0],c=a[1];return r.a.createElement("div",null,r.a.createElement(r.a.Fragment,null,r.a.createElement(V.a,{onClick:function(){return c(!n)},edge:"end",color:"inherit","aria-label":"menu"},r.a.createElement(Y.a,null)),r.a.createElement(H.a,{anchor:"right",open:n,onClose:function(){return c(!n)}},r.a.createElement("div",{className:Object(P.a)(e.list),role:"presentation"},r.a.createElement(L.a,null,r.a.createElement(u.b,{style:{color:"black"},to:"/"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(K.a,null)),r.a.createElement(B.a,{primary:"Home"}))),r.a.createElement(u.b,{style:{color:"black"},to:"/browse"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(z.a,null)),r.a.createElement(B.a,{primary:"Browse"}))),r.a.createElement(W.a,null),r.a.createElement(u.b,{style:{color:"black"},to:"/loginPage"},r.a.createElement(M.a,{button:!0},r.a.createElement(q.a,null,r.a.createElement(C.a,null)),r.a.createElement(B.a,{primary:"Log In"}))))))))},$=function(){return b.isLoggedIn()?r.a.createElement(O.a,{position:"static"},r.a.createElement("div",{className:"navbar__full"},r.a.createElement(S.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/"},r.a.createElement(x.a,{variant:"h6"},"Plant Based Plates"))),r.a.createElement("div",null,r.a.createElement(u.b,{to:"/createRecipe"},r.a.createElement(h.a,{style:{marginLeft:10},color:"inherit",endIcon:r.a.createElement(I.a,null)},"Create Recipe")),r.a.createElement(h.a,{style:{marginLeft:10},color:"inherit"},"Browse"),r.a.createElement(u.b,{to:"/account"},r.a.createElement(h.a,{style:{marginLeft:10},color:"inherit",endIcon:r.a.createElement(C.a,null)},"Account"))))),r.a.createElement("div",{className:"navbar__mobile"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/"},r.a.createElement(x.a,{variant:"h6"},"Plant Based Plates"))),r.a.createElement("div",null,r.a.createElement(X,null)))):r.a.createElement(O.a,{position:"static"},r.a.createElement("div",{className:"navbar__full"},r.a.createElement(S.a,{style:{display:"flex",justifyContent:"space-between"}},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/"},r.a.createElement(x.a,{variant:"h6"},"Plant Based Plates"))),r.a.createElement("div",null,r.a.createElement(h.a,{style:{marginLeft:10},color:"inherit"},"Browse"),r.a.createElement(u.b,{to:"/about"},r.a.createElement(h.a,{style:{marginLeft:10},color:"inherit",endIcon:r.a.createElement(A.a,null)},"About")),r.a.createElement(u.b,{to:"/loginPage"},r.a.createElement(h.a,{style:{marginLeft:10},color:"inherit"},"Log In"))))),r.a.createElement("div",{className:"navbar__mobile"},r.a.createElement("div",null,r.a.createElement(u.b,{to:"/"},r.a.createElement(x.a,{variant:"h6"},"Plant Based Plates"))),r.a.createElement("div",null,r.a.createElement(Z,null))))},ee=a(40),te=function(e){var t=r.a.useState(""),a=Object(i.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!0),o=Object(i.a)(l,2),s=o[0],u=o[1];return r.a.useEffect((function(){ee.a.storage().refFromURL("gs://vegan-webapp.appspot.com/".concat(e.recipe.imageUrlUuid,".").concat(e.recipe.imageExtension)).getDownloadURL().then((function(e){console.log(e),c(e),u(!1)}))}),[e.pageTrigger]),s?null:r.a.createElement("a",{className:"recipe-card",href:"/viewRecipe/".concat(e.recipe.id)},r.a.createElement("img",{className:"recipe-card__image",src:n}),r.a.createElement("div",{className:"container"},r.a.createElement("h4",null,r.a.createElement("b",null,e.recipe.title)),r.a.createElement("div",{className:"recipe-card__description"},r.a.createElement("p",null,e.recipe.description)),r.a.createElement("p",{style:{fontStyle:"italic"}},"Prep time: ",e.recipe.prepMinutes," min."),r.a.createElement("p",{style:{fontStyle:"italic"}},"Cook time: ",e.recipe.cookMinutes," min.")))},ae=function(){return r.a.createElement("div",{className:"footer-container"},r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{style:{textAlign:"center"}},"Plant Based Plates 2020")))},ne=k.a.create({baseURL:"https://vegan-webapp.herokuapp.com",headers:{Authorization:"Bearer ".concat(b.getAccessToken())}});ne.interceptors.response.use((function(e){return e}),(function(e){return e.response&&(console.log(e.response.status),401===e.response.status&&k.a.post("".concat("https://vegan-webapp.herokuapp.com","/token"),{refreshToken:b.getRefreshToken()}).then((function(e){b.setAccessToken(e.data.accessToken)})).then((function(){return window.location.reload()})).catch((function(e){console.log("HERE",e)}))),e}));var re=ne,ce=function e(){Object(v.a)(this,e)};ce.pageRecipes=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat("https://vegan-webapp.herokuapp.com","/pageRecipes/").concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log("ERROR: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ce.pageRecipesByName=function(){var e=Object(f.a)(d.a.mark((function e(t,a){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat("https://vegan-webapp.herokuapp.com","/pageRecipesByName/").concat(t,"/").concat(a));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),console.log("ERR: ",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,a){return e.apply(this,arguments)}}(),ce.getRecipeById=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat("https://vegan-webapp.herokuapp.com","/getRecipeById/").concat(t));case 3:return a=e.sent,e.abrupt("return",a);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ce.getRecipesForUser=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("".concat("https://vegan-webapp.herokuapp.com","/getRecipesForUser/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),ce.createRecipe=function(){var e=Object(f.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.abrupt("return",re.post("".concat("https://vegan-webapp.herokuapp.com","/createRecipe"),{recipe:t,userUuid:a}));case 4:e.prev=4,e.t0=e.catch(0),console.log(e.t0);case 7:case"end":return e.stop()}}),e,null,[[0,4]])})));return function(t,a){return e.apply(this,arguments)}}();var le=a(246),ie=a(136),oe=a.n(ie),se=function(){var e=r.a.useState([]),t=Object(i.a)(e,2),a=t[0],n=t[1],c=r.a.useState(0),l=Object(i.a)(c,2),o=l[0],s=l[1],u=r.a.useState(0),m=Object(i.a)(u,2),p=m[0],d=m[1],f=r.a.useState(""),E=Object(i.a)(f,2),g=E[0],h=E[1],v=r.a.useState(!1),b=Object(i.a)(v,2),y=b[0],w=b[1],k=r.a.useState(!0),N=Object(i.a)(k,2),R=N[0],j=N[1];r.a.useEffect((function(){O()}),[o]);var O=function(){ce.pageRecipes(o).then((function(e){j(!0),n(e.data.recipes),d(e.data.totalCount),w(!y),j(!1)}))};return R?null:r.a.createElement("div",{className:"home-page"},r.a.createElement($,null),r.a.createElement("div",{className:"contain"},r.a.createElement("div",{style:{display:"flex",justifyContent:"flex-end",margin:"10px"}},r.a.createElement("div",{className:"home-page__search-bar"},r.a.createElement(oe.a,{style:{borderRadius:3},value:g,onChange:function(e){return h(e)},onRequestSearch:function(){g.length>0&&ce.pageRecipesByName(o,g).then((function(e){n(e.data.recipes),d(e.data.totalCount),w(!y)}))},onCancelSearch:function(){h(""),O()},placeholder:"Search for a recipe..."}))),r.a.createElement("div",{className:"recipe-card-container"},a.map((function(e,t){return r.a.createElement(te,{pageTrigger:y,key:t,recipe:e})})))),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"1em"}},r.a.createElement(le.a,{count:Math.ceil(p/8),color:"primary",shape:"rounded",page:o+1,onChange:function(e,t){console.log(t),s(t-1)}})),r.a.createElement("div",{style:{display:"flex",justifyContent:"center",margin:"1em"}},r.a.createElement("div",null,p," total ",1===p?"recipe":"recipes")),r.a.createElement(ae,null))},ue=a(140),me=function(e){return r.a.createElement("div",{className:e.visible?"modal-background-active":"modal-background"},r.a.createElement("div",{className:"modal"},e.children,r.a.createElement("span",{className:"modal-close",onClick:function(){return e.setVisible&&e.setVisible(!1)}},r.a.createElement(ue.a,null))))},pe=function(){var e=r.a.useState(!1),t=Object(i.a)(e,2),a=t[0],n=t[1];return r.a.createElement("div",{className:"about-page"},r.a.createElement($,null),r.a.createElement("div",null,r.a.createElement("h1",null,"About Us"),r.a.createElement("div",{className:"about-page__content"},r.a.createElement("p",{className:"about-page__description"},"Plant based plates is a web app created by myself (Jake Ruth) as a way to bring plant based eaters together to share recipes, insights, and spread the joy of vegan cooking! I have found immense joy in creating meals are low cost, ethical, and better for the environment! Eating plant based is a great and easy way to do all of these things. My hope is that with our community, we can grow a large collection of plant based recipes to show the world that you don't have to restrict to eat a vegan diet! :)"),r.a.createElement("div",{className:"about-page__contact"},r.a.createElement("h2",null,"Contact Us!"),r.a.createElement("p",null,"Send an email to ",r.a.createElement("strong",null,"plantbasedplates@gmail.com")," for feedback and suggestions"),r.a.createElement("button",{className:"btn-primary",onClick:function(){return n(!0)}},"Sign up for mailing list!")))),r.a.createElement("div",{className:"footer-fixed"},r.a.createElement(ae,null)),r.a.createElement(me,{visible:a,setVisible:n},r.a.createElement("h2",null,"Subscribe to our mailing list!"),r.a.createElement("label",null,"Enter your email:"),r.a.createElement("input",{type:"text"}),r.a.createElement("button",{className:"btn-primary",onClick:function(){return n(!a)}},"Submit")))},de=function(e){var t=r.a.useState(""),a=Object(i.a)(t,2),n=a[0],c=a[1],l=r.a.useState(!0),o=Object(i.a)(l,2),s=o[0],u=o[1];return r.a.useEffect((function(){ee.a.storage().refFromURL("gs://vegan-webapp.appspot.com/".concat(e.recipe.imageUrlUuid,".").concat(e.recipe.imageExtension)).getDownloadURL().then((function(e){console.log(e),c(e)})).then((function(){return u(!1)}))}),[e.recipe]),s?null:r.a.createElement("img",{src:n,style:{objectFit:"cover"},alt:"recipe image",className:"view-recipe__img"})},fe=a(137),Ee=a.n(fe),ge=function(e){return r.a.createElement(u.b,{to:"/editRecipe/".concat(e.recipe.id)},r.a.createElement(h.a,{endIcon:r.a.createElement(Ee.a,null),color:"secondary",variant:"contained",style:{borderRadius:0,float:"right",margin:10}},"Edit Recipe"))},he=a(138),ve=a.n(he),be=function(e){var t=r.a.useState(null),a=Object(i.a)(t,2),n=a[0],c=a[1],l=r.a.useContext(y).user;return r.a.useEffect((function(){ce.getRecipeById(e.match.params.recipeId).then((function(e){return c(e.data)})).catch((function(e){return console.log(e)}))}),[]),null==n?null:r.a.createElement("div",null,r.a.createElement($,null),n.applicationUser.uuid===l.uuid&&r.a.createElement(ge,{recipe:n}),r.a.createElement("div",{className:"view-recipe"},r.a.createElement("div",{className:"view-recipe__header"},r.a.createElement(de,{recipe:n}),r.a.createElement("div",null,r.a.createElement("h1",null,null===n||void 0===n?void 0:n.title),r.a.createElement("p",null,"Prep Time: ",null===n||void 0===n?void 0:n.prepMinutes," minutes"),r.a.createElement("p",null,"Cook Time: ",null===n||void 0===n?void 0:n.cookMinutes," minutes"),r.a.createElement("p",null,"Total Time: ",Number(null===n||void 0===n?void 0:n.prepMinutes)+Number(null===n||void 0===n?void 0:n.cookMinutes)," minutes"))),r.a.createElement("div",{className:"view-recipe__description"},n.description),r.a.createElement(W.a,null),r.a.createElement("div",{className:"view-recipe__content"},r.a.createElement("div",null,r.a.createElement("h2",null,"Ingredients:"),r.a.createElement("ul",{className:"view-recipe__ingredients"},null===n||void 0===n?void 0:n.ingredients.map((function(e,t){return r.a.createElement("li",{key:t},e)})))),r.a.createElement("div",{className:"view-recipe__item"},r.a.createElement("h2",null,"Instructions:"),r.a.createElement("p",{className:"view-recipe__instructions"},null===n||void 0===n?void 0:n.instructions))),r.a.createElement(W.a,null),r.a.createElement("div",{className:"view-recipe__toolbar"},r.a.createElement(h.a,{color:"secondary",variant:"contained",style:{borderRadius:0,marginRight:"1em"},onClick:function(){return window.print()}},"Print Recipe"),r.a.createElement(h.a,{endIcon:r.a.createElement(ve.a,null),color:"primary",variant:"contained",style:{borderRadius:0,marginLeft:"1em"},onClick:function(){return window.print()}},"Add To Favorites"))),r.a.createElement(ae,null))},ye=function(){var e=Object(E.e)(),t=e.control,a=e.errors,n=Object(E.c)({control:t,name:"ingredients"}),c=n.fields,l=n.append,i=n.remove;return r.a.createElement("div",{className:"create-recipe__content"},r.a.createElement("div",{className:"create-recipe__section"},r.a.createElement(E.a,{as:g.a,control:t,rules:{required:"Title Required"},type:"text",id:"title",name:"title",label:"Title",fullWidth:!0}),r.a.createElement("div",{className:"error"},a.title&&a.title.message),r.a.createElement(E.a,{as:g.a,control:t,multiline:!0,fullWidth:!0,variant:"outlined",rows:5,style:{marginTop:20},name:"description",label:"Description",rules:{required:"Description Required"}}),r.a.createElement("div",{className:"error"},a.description&&a.description.message),r.a.createElement(E.a,{as:g.a,control:t,multiline:!0,fullWidth:!0,variant:"outlined",rows:10,style:{marginTop:20},name:"instructions",label:"Instructions",rules:{required:"Instructions Required"}}),r.a.createElement("div",{className:"error"},a.description&&a.description.message)),r.a.createElement("div",{className:"create-recipe__section"},r.a.createElement("h3",{style:{fontStyle:"italic"}},"Prep Time"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{as:g.a,control:t,type:"number",name:"prepHours",label:"Hours",defaultValue:0}),r.a.createElement(E.a,{as:g.a,control:t,type:"number",name:"prepMinutes",label:"Minutes",defaultValue:0})),r.a.createElement("h3",{style:{fontStyle:"italic"}},"Cook Time"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{as:g.a,control:t,type:"number",name:"cookHours",label:"Hours",defaultValue:0}),r.a.createElement(E.a,{as:g.a,control:t,type:"number",name:"cookMinutes",label:"Minutes",defaultValue:0})),r.a.createElement(E.a,{as:g.a,control:t,name:"yieldAmount",label:"Yield"}),r.a.createElement("h3",{style:{fontStyle:"italic"}},"Ingredients"),c.map((function(e,a){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{as:g.a,fullWidth:!0,name:"ingredients[".concat(a,"].value"),control:t}),r.a.createElement(h.a,{variant:"contained",size:"small",style:{borderRadius:0},color:"secondary",onClick:function(){return i(a)}},"Delete"))})),r.a.createElement(h.a,{type:"button",style:{marginTop:"1em"},variant:"contained",color:"primary",size:"small",onClick:function(){return l({value:""})}},"Add Ingredient")))},we=a(91),ke=a.n(we),Ne=(a(128),a(92)),Re=a.n(Ne),je=function(e){var t,a,c=e.setRecipeImageFile,l=Object(n.useState)(),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useRef)(null),p=Object(n.useRef)(null),d=Object(n.useState)({unit:"%",width:30,aspect:1}),f=Object(i.a)(d,2),E=f[0],g=f[1],v=Object(n.useState)(null),b=Object(i.a)(v,2),y=b[0],w=b[1],k=window.devicePixelRatio||1;function N(e,t){t&&e&&function(e,t,a){var n=document.createElement("canvas");n.width=t,n.height=a;var r=n.getContext("2d");try{e.width>0&&e.height>0&&r.drawImage(e,0,0,e.width,e.height,0,0,t,a)}catch(c){alert(c)}return n}(e,t.width,t.height).toBlob((function(e){var t=new File([e],"png",{type:"image/png"});c(t)}),"image/png",1)}var R=Object(n.useCallback)((function(e){m.current=e}),[]);return Object(n.useEffect)((function(){if(y&&p.current&&m.current){var e=m.current,t=p.current,a=y,n=e.naturalWidth/e.width,r=e.naturalHeight/e.height,c=t.getContext("2d");t.width=a.width*k,t.height=a.height*k,c.setTransform(k,0,0,k,0,0),c.imageSmoothingQuality="high",c.drawImage(e,a.x*n,a.y*r,a.width*n,a.height*r,0,0,a.width,a.height),N(p.current,y)}}),[y]),r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement("input",{style:{display:"none"},type:"file",id:"raised-button-file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return u(t.result)})),t.readAsDataURL(e.target.files[0])}}}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(h.a,{endIcon:r.a.createElement(Re.a,null),style:{borderRadius:0,marginTop:10},variant:"contained",component:"span"},"Upload Photo"))),r.a.createElement(ke.a,{src:s,onImageLoaded:R,crop:E,onChange:function(e){return g(e)},onComplete:function(e){return w(e)}}),r.a.createElement("div",null,r.a.createElement("canvas",{ref:p,style:{width:Math.round(null!==(t=null===y||void 0===y?void 0:y.width)&&void 0!==t?t:0),height:Math.round(null!==(a=null===y||void 0===y?void 0:y.height)&&void 0!==a?a:0),display:"none"}})))},Oe=function(){var e=Object(E.d)({defaultValues:{ingredients:[{value:""}]}}),t=Object(m.g)(),a=r.a.useState(null),n=Object(i.a)(a,2),c=n[0],l=n[1],o=r.a.useContext(y).user,s=function(e){var t=c.name.split(".").pop();ee.a.storage().ref().child("".concat(e,".").concat(t)).put(c).then((function(e){return console.log(e)}))},u=function(){var e=Object(f.a)(d.a.mark((function e(a,n){var r,l,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=function(){var e=[];return a.ingredients.map((function(t){e.push(t.value)})),e},l={title:a.title,description:a.description,cookMinutes:Number(a.cookMinutes)+60*a.cookHours,prepMinutes:Number(a.prepMinutes)+60*a.prepHours,ingredients:r(),instructions:a.instructions,yieldAmount:a.yieldAmount,imageExtension:c.name.split(".").pop()},e.prev=2,e.next=5,ce.createRecipe(l,o.uuid);case 5:i=e.sent,s(i.data.imageUrlUuid),t.push("/"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.log("ERR: ",e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement($,null),r.a.createElement("form",{onSubmit:e.handleSubmit(u)},r.a.createElement("h1",{style:{textAlign:"center"}},"Create Recipe"),r.a.createElement("div",{className:"create-recipe"},r.a.createElement(E.b,e,r.a.createElement(ye,null)),r.a.createElement("br",null),r.a.createElement(je,{setRecipeImageFile:l}),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",style:{borderRadius:0,maxWidth:200,marginTop:"1em"}},"Save Recipe!"))))},Se=function e(){Object(v.a)(this,e)};Se.getApplicationUser=function(){var e=Object(f.a)(d.a.mark((function e(t){var a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,re.get("".concat("https://vegan-webapp.herokuapp.com","/getApplicationUser/").concat(t));case 3:return a=e.sent,e.abrupt("return",a.data);case 7:throw e.prev=7,e.t0=e.catch(0),new Error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Se.logoutUser=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",re.delete("".concat("https://vegan-webapp.herokuapp.com","/logout")).catch((function(){localStorage.clear()})));case 1:case"end":return e.stop()}}),e)})));var xe=a(244),_e=function(){var e=Object(m.g)(),t=r.a.useContext(y).user,a=r.a.useState(),n=Object(i.a)(a,2),c=n[0],l=n[1],o=r.a.useState(!0),s=Object(i.a)(o,2),u=s[0],p=(s[1],r.a.useState()),E=Object(i.a)(p,2),g=E[0],v=E[1];r.a.useEffect((function(){Se.getApplicationUser(t.uuid).then((function(e){l(e)})),ce.getRecipesForUser(t.uuid).then((function(e){v(e)}))}),[]);var b=function(){var t=Object(f.a)(d.a.mark((function t(){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Se.logoutUser();case 2:localStorage.clear(),e.replace("/loginPage");case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement($,null),u&&r.a.createElement(xe.a,{size:"3rem"}),r.a.createElement("h2",null,"Good afternoon ",null===c||void 0===c?void 0:c.firstName,"!"),r.a.createElement("h2",null,"Your Recipes:"),r.a.createElement("div",{className:"recipe-card-container"},null===g||void 0===g?void 0:g.map((function(e,t){return r.a.createElement(te,{recipe:e})}))),r.a.createElement("div",null,r.a.createElement(h.a,{onClick:function(){return b()}},"Logout")))},Ce=a(141),Te=function(e){var t=e.component,a=Object(Ce.a)(e,["component"]);if(!t)throw Error("component is undefined");var n=t;return r.a.createElement(m.b,Object.assign({},a,{render:function(e){return b.isLoggedIn()?r.a.createElement(n,e):r.a.createElement(m.a,{to:{pathname:"/"}})}}))},Ie=function(e){var t=Object(E.e)(),a=t.control,n=t.errors,c=Object(E.c)({control:a,name:"ingredients"}),l=c.fields,i=c.append,o=c.remove;return r.a.createElement("div",{className:"create-recipe__content"},r.a.createElement("div",{className:"create-recipe__section"},r.a.createElement(E.a,{as:g.a,control:a,rules:{required:"Title Required"},type:"text",id:"title",name:"title",label:"Title",fullWidth:!0,defaultValue:""}),r.a.createElement("div",{className:"error"},n.title&&n.title.message),r.a.createElement(E.a,{as:g.a,control:a,multiline:!0,fullWidth:!0,variant:"outlined",rows:5,style:{marginTop:20},name:"description",label:"Description",rules:{required:"Description Required"},defaultValue:""}),r.a.createElement("div",{className:"error"},n.description&&n.description.message),r.a.createElement(E.a,{as:g.a,control:a,multiline:!0,fullWidth:!0,variant:"outlined",rows:10,style:{marginTop:20},name:"instructions",label:"Instructions",rules:{required:"Instructions Required"}}),r.a.createElement("div",{className:"error"},n.description&&n.description.message)),r.a.createElement("div",{className:"create-recipe__section"},r.a.createElement("h3",{style:{fontStyle:"italic"}},"Prep Time"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{as:g.a,control:a,type:"number",name:"prepHours",label:"Hours",defaultValue:0}),r.a.createElement(E.a,{as:g.a,control:a,type:"number",name:"prepMinutes",label:"Minutes",defaultValue:0})),r.a.createElement("h3",{style:{fontStyle:"italic"}},"Cook Time"),r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{as:g.a,control:a,type:"number",name:"cookHours",label:"Hours",defaultValue:0}),r.a.createElement(E.a,{as:g.a,control:a,type:"number",name:"cookMinutes",label:"Minutes",defaultValue:0})),r.a.createElement(E.a,{as:g.a,control:a,name:"yieldAmount",label:"Yield"}),r.a.createElement("h3",{style:{fontStyle:"italic"}},"Ingredients"),l.map((function(e,t){return r.a.createElement("div",{style:{display:"flex"}},r.a.createElement(E.a,{as:g.a,fullWidth:!0,name:"ingredients[".concat(t,"].value"),control:a}),r.a.createElement(h.a,{variant:"contained",size:"small",style:{borderRadius:0},color:"secondary",onClick:function(){return o(t)}},"Delete"))})),r.a.createElement(h.a,{type:"button",style:{marginTop:"1em"},variant:"contained",color:"primary",size:"small",onClick:function(){return i({value:""})}},"Add Ingredient")))},Ue=function(e){var t,a,c=e.setRecipeImageFile,l=Object(n.useState)(),o=Object(i.a)(l,2),s=o[0],u=o[1],m=Object(n.useRef)(null),p=Object(n.useRef)(null),d=Object(n.useState)({unit:"%",width:30,aspect:1}),f=Object(i.a)(d,2),E=f[0],g=f[1],v=Object(n.useState)(null),b=Object(i.a)(v,2),y=b[0],w=b[1],k=window.devicePixelRatio||1;function N(e,t){t&&e&&function(e,t,a){var n=document.createElement("canvas");n.width=t,n.height=a;var r=n.getContext("2d");try{e.width>0&&e.height>0&&r.drawImage(e,0,0,e.width,e.height,0,0,t,a)}catch(c){alert(c)}return n}(e,t.width,t.height).toBlob((function(e){var t=new File([e],"png",{type:"image/png"});c(t)}),"image/png",1)}var R=Object(n.useCallback)((function(e){m.current=e}),[]);return Object(n.useEffect)((function(){if(y&&p.current&&m.current){var e=m.current,t=p.current,a=y,n=e.naturalWidth/e.width,r=e.naturalHeight/e.height,c=t.getContext("2d");t.width=a.width*k,t.height=a.height*k,c.setTransform(k,0,0,k,0,0),c.imageSmoothingQuality="high",c.drawImage(e,a.x*n,a.y*r,a.width*n,a.height*r,0,0,a.width,a.height),N(p.current,y)}}),[y]),r.a.createElement("div",{className:"App"},r.a.createElement("div",null,r.a.createElement("input",{style:{display:"none"},type:"file",id:"raised-button-file",accept:"image/*",onChange:function(e){if(e.target.files&&e.target.files.length>0){var t=new FileReader;t.addEventListener("load",(function(){return u(t.result)})),t.readAsDataURL(e.target.files[0])}}}),r.a.createElement("label",{htmlFor:"raised-button-file"},r.a.createElement(h.a,{endIcon:r.a.createElement(Re.a,null),style:{borderRadius:0,marginTop:10},variant:"contained",component:"span"},"Upload Photo"))),r.a.createElement(ke.a,{src:s,onImageLoaded:R,crop:E,onChange:function(e){return g(e)},onComplete:function(e){return w(e)}}),r.a.createElement("div",null,r.a.createElement("canvas",{ref:p,style:{width:Math.round(null!==(t=null===y||void 0===y?void 0:y.width)&&void 0!==t?t:0),height:Math.round(null!==(a=null===y||void 0===y?void 0:y.height)&&void 0!==a?a:0),display:"none"}})))},Ae=function(e){var t=Object(m.g)(),a=r.a.useState(null),n=Object(i.a)(a,2),c=n[0],l=n[1],o=r.a.useState({}),s=Object(i.a)(o,2),u=s[0],p=s[1],g=Object(E.d)();r.a.useEffect((function(){ce.getRecipeById(e.match.params.recipeId).then((function(e){p(e.data)}))}),[]),r.a.useEffect((function(){g.setValue("title",u.title,{shouldDirty:!0}),g.setValue("description",u.description,{shouldDirty:!0})}),[u]);var v=function(){var e=Object(f.a)(d.a.mark((function e(a,n){var r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=function(){var e=[];return a.ingredients.map((function(t){e.push(t.value)})),e},{title:a.title,description:a.description,cookMinutes:Number(a.cookMinutes)+60*a.cookHours,prepMinutes:Number(a.prepMinutes)+60*a.prepHours,ingredients:r(),instructions:a.instructions,yieldAmount:a.yieldAmount,imageExtension:c.name.split(".").pop()};try{t.push("/")}catch(n){console.log("ERR: ",n)}case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement($,null),r.a.createElement("form",{onSubmit:g.handleSubmit(v)},r.a.createElement("h1",{style:{textAlign:"center"}},"Create Recipe"),r.a.createElement("div",{className:"create-recipe"},r.a.createElement(E.b,g,r.a.createElement(Ie,{recipe:u})),r.a.createElement("br",null),r.a.createElement(Ue,{setRecipeImageFile:l}),r.a.createElement(h.a,{type:"submit",variant:"contained",color:"primary",style:{borderRadius:0,maxWidth:200,marginTop:"1em"}},"Save Recipe!"))))},Pe=function(){return r.a.createElement(u.a,null,r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/",exact:!0,component:se}),r.a.createElement(m.b,{path:"/loginPage",component:R}),r.a.createElement(m.b,{path:"/register",component:j}),r.a.createElement(m.b,{path:"/about",component:pe}),r.a.createElement(m.b,{path:"/viewRecipe/:recipeId",component:be}),r.a.createElement(m.b,{path:"/account",component:_e}),r.a.createElement(Te,{path:"/createRecipe",component:Oe}),r.a.createElement(Te,{path:"/editRecipe/:recipeId",component:Ae})))};var Fe=function(){var e=r.a.useState(b.getUserFromStorage()),t=Object(i.a)(e,2),a=t[0],n=t[1],c=Object(o.a)({palette:{primary:{main:"#303030"},secondary:{main:"#FF5E5B"},error:{main:"#FF5E5B"},success:{main:"#20b2aa"}},typography:{fontFamily:["Verdana"].join(",")}}),l={apiKey:"AIzaSyAkL0lof7kkTmXwPw_xsyf57ZkrUwIbVxo",authDomain:"vegan-webapp.firebaseapp.com",databaseURL:"https://vegan-webapp.firebaseio.com",projectId:"vegan-webapp",storageBucket:"vegan-webapp.appspot.com",messagingSenderId:"29504851544",appId:"1:29504851544:web:f3981ecbd3eb6f51c7042d",measurementId:"G-2B8615KNJN"};return r.a.useEffect((function(){ee.a.initializeApp(l);b.getUserFromStorage()}),[]),r.a.createElement("header",{"data-testid":"app-element"},r.a.createElement(s.a,{theme:c},r.a.createElement(y.Provider,{value:{user:a,setUser:n}},r.a.createElement(Pe,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Fe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[148,1,2]]]);
//# sourceMappingURL=main.13074d37.chunk.js.map